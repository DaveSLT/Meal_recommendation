{% extends "base.html" %} {% block title %}Register - Meal Prefs{% endblock %}
{% block content %}
<div class="register-page">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-8 col-lg-6">
        <div class="register-card">
          <div class="register-header text-center">
            <div class="app-logo">
              <i class="bi bi-egg-fried logo-icon"></i>
              <span class="logo-text">MealPrefs</span>
            </div>
            <h1 class="register-title">Create an Account</h1>
            <p class="register-subtitle">
              Join our community and discover personalized meal recommendations
            </p>
          </div>

          <div class="register-body">
            <form method="POST" action="{{ url_for('auth.signup') }}">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group mb-3">
                    <label for="username" class="form-label">Username</label>
                    <div class="input-group">
                      <span class="input-group-text">
                        <i class="bi bi-person"></i>
                      </span>
                      <input
                        type="text"
                        class="form-control"
                        id="username"
                        name="username"
                        placeholder="Choose a username"
                        required
                      />
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="form-group mb-3">
                    <label for="email" class="form-label">Email Address</label>
                    <div class="input-group">
                      <span class="input-group-text">
                        <i class="bi bi-envelope"></i>
                      </span>
                      <input
                        type="email"
                        class="form-control"
                        id="email"
                        name="email"
                        placeholder="Enter your email"
                        required
                      />
                    </div>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="form-group mb-3">
                    <label for="password1" class="form-label">Password</label>
                    <div class="input-group">
                      <span class="input-group-text">
                        <i class="bi bi-lock"></i>
                      </span>
                      <input
                        type="password"
                        class="form-control"
                        id="password1"
                        name="password1"
                        placeholder="Create a password"
                        required
                      />
                      <button
                        class="btn btn-outline-secondary toggle-password"
                        type="button"
                        data-target="password1"
                      >
                        <i class="bi bi-eye"></i>
                      </button>
                    </div>
                    <div
                      class="password-strength mt-2 d-none"
                      id="password-strength"
                    >
                      <div class="progress" style="height: 5px">
                        <div
                          class="progress-bar"
                          role="progressbar"
                          style="width: 0%"
                        ></div>
                      </div>
                      <small class="text-muted strength-text"
                        >Password strength: <span>Weak</span></small
                      >
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="form-group mb-3">
                    <label for="password2" class="form-label"
                      >Confirm Password</label
                    >
                    <div class="input-group">
                      <span class="input-group-text">
                        <i class="bi bi-lock"></i>
                      </span>
                      <input
                        type="password"
                        class="form-control"
                        id="password2"
                        name="password2"
                        placeholder="Confirm your password"
                        required
                      />
                      <button
                        class="btn btn-outline-secondary toggle-password"
                        type="button"
                        data-target="password2"
                      >
                        <i class="bi bi-eye"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <div class="form-check mb-4">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="terms"
                  name="terms"
                  required
                />
                <label class="form-check-label" for="terms">
                  I agree to the
                  <a href="#" class="terms-link">Terms of Service</a> and
                  <a href="#" class="terms-link">Privacy Policy</a>
                </label>
              </div>

              <div class="d-grid">
                <button type="submit" class="btn btn-primary btn-register">
                  <i class="bi bi-person-plus me-2"></i>Create Account
                </button>
              </div>
            </form>
          </div>

          <div class="register-footer text-center">
            <p class="login-text">
              Already have an account?
              <a href="{{ url_for('auth.login') }}" class="login-link"
                >Sign In</a
              >
            </p>
            <a href="{{ url_for('views.home') }}" class="back-to-home">
              <i class="bi bi-arrow-left me-1"></i>Back to Home
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="register-background">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
    <div class="shape shape-4"></div>
  </div>
</div>

<style>
  .register-page {
    min-height: 100vh;
    display: flex;
    align-items: center;
    position: relative;
    overflow: hidden;
    padding: 40px 0;
  }

  .register-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
  }

  .shape {
    position: absolute;
    border-radius: 50%;
    background: linear-gradient(
      45deg,
      rgba(40, 167, 69, 0.1),
      rgba(32, 201, 151, 0.1)
    );
  }

  .shape-1 {
    width: 500px;
    height: 500px;
    top: -250px;
    left: -250px;
  }

  .shape-2 {
    width: 300px;
    height: 300px;
    bottom: -150px;
    right: -150px;
  }

  .shape-3 {
    width: 200px;
    height: 200px;
    bottom: 250px;
    left: 50px;
    opacity: 0.5;
  }

  .shape-4 {
    width: 400px;
    height: 400px;
    top: 100px;
    right: 50px;
    opacity: 0.3;
  }

  .register-card {
    background-color: white;
    border-radius: 20px;
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    padding: 40px;
  }

  .register-header {
    margin-bottom: 30px;
  }

  .app-logo {
    display: inline-flex;
    align-items: center;
    margin-bottom: 20px;
  }

  .logo-icon {
    font-size: 2rem;
    color: #28a745;
    margin-right: 10px;
  }

  .logo-text {
    font-size: 1.5rem;
    font-weight: 700;
    color: #333;
  }

  .register-title {
    font-size: 2rem;
    font-weight: 700;
    color: #333;
    margin-bottom: 10px;
  }

  .register-subtitle {
    color: #6c757d;
    margin-bottom: 0;
  }

  .register-body {
    margin-bottom: 30px;
  }

  .form-label {
    font-weight: 500;
    color: #495057;
  }

  .input-group-text {
    background-color: #f8f9fa;
    border-right: none;
  }

  .form-control {
    border-left: none;
  }

  .form-control:focus {
    box-shadow: none;
    border-color: #ced4da;
  }

  .toggle-password {
    border-left: none;
    background-color: white;
  }

  .terms-link {
    color: #28a745;
    text-decoration: none;
  }

  .terms-link:hover {
    text-decoration: underline;
  }

  .btn-register {
    padding: 12px;
    font-weight: 600;
    background-color: #28a745;
    border-color: #28a745;
  }

  .btn-register:hover {
    background-color: #218838;
    border-color: #1e7e34;
  }

  .login-text {
    margin-bottom: 15px;
  }

  .login-link {
    color: #28a745;
    font-weight: 600;
    text-decoration: none;
  }

  .login-link:hover {
    text-decoration: underline;
  }

  .back-to-home {
    color: #6c757d;
    text-decoration: none;
    font-size: 0.875rem;
  }

  .back-to-home:hover {
    color: #28a745;
  }

  @media (max-width: 768px) {
    .register-card {
      padding: 30px;
    }

    .register-title {
      font-size: 1.75rem;
    }
  }
</style>

{% block additional_scripts %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Toggle password visibility
    const toggleButtons = document.querySelectorAll(".toggle-password");

    toggleButtons.forEach((button) => {
      button.addEventListener("click", function () {
        const targetId = this.getAttribute("data-target");
        const passwordInput = document.querySelector("#" + targetId);

        const type =
          passwordInput.getAttribute("type") === "password"
            ? "text"
            : "password";
        passwordInput.setAttribute("type", type);

        // Toggle eye icon
        const eyeIcon = this.querySelector("i");
        eyeIcon.classList.toggle("bi-eye");
        eyeIcon.classList.toggle("bi-eye-slash");
      });
    });

    // Password strength meter
    const password1Input = document.querySelector("#password1");
    const strengthMeter = document.querySelector("#password-strength");
    const progressBar = strengthMeter.querySelector(".progress-bar");
    const strengthText = strengthMeter.querySelector(".strength-text span");

    password1Input.addEventListener("input", function () {
      const password = this.value;

      if (password.length > 0) {
        strengthMeter.classList.remove("d-none");

        // Calculate password strength
        let strength = 0;

        // Length check
        if (password.length >= 8) strength += 25;

        // Uppercase check
        if (/[A-Z]/.test(password)) strength += 25;

        // Lowercase check
        if (/[a-z]/.test(password)) strength += 25;

        // Number/special char check
        if (/[0-9!@#$%^&*]/.test(password)) strength += 25;

        // Update UI
        progressBar.style.width = strength + "%";

        if (strength < 25) {
          progressBar.className = "progress-bar bg-danger";
          strengthText.textContent = "Weak";
        } else if (strength < 50) {
          progressBar.className = "progress-bar bg-warning";
          strengthText.textContent = "Fair";
        } else if (strength < 75) {
          progressBar.className = "progress-bar bg-info";
          strengthText.textContent = "Good";
        } else {
          progressBar.className = "progress-bar bg-success";
          strengthText.textContent = "Strong";
        }
      } else {
        strengthMeter.classList.add("d-none");
      }
    });
  });
</script>
{% endblock %} {% endblock %}
